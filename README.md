# mqtt2influxWb

Скрипт для сохранения данных из mosquitto в InfluxDB.

## Как использовать:

1. Создайте базу данных с названием `mqtt_data`.
2. Укажите требуемый IP mqtt брокера, username и пароль в файле config/default.json
3. Укажите требуемый IP, port, имя базы данных (`mqtt_data`) для influxdb в файле config/default.json
4. Запустите `node index.js'`

## Конфигурация

```
"executor": {
    "runInterval": 100,
    "batchMinInterval": 1000,
    "batchMaxItems": 200
  }
```

| Параматр         | Значение | Описание                                                                                |
|------------------|----------|-----------------------------------------------------------------------------------------|
| runInterval      | 100      | период опроса очереди сообщений полученных из MQTT (миллисекунд)                        |
| batchMinInterval | 1000     | Максимальное время ожадания набора пакета сообщений для сохранения в базу (миллисекунд) |
| batchMaxItems    | 200      | Максимальное кол-во сообщений для набора пакета для сохранения в базу (штук)            |


## PS

Скрипт написан по мотивам питон версии https://github.com/wirenboard/wbmqtt2influx
Скрипт используется для интеграции Grafana c контроллером Wirenboard для реализации мониторинга умного дома.

Инструкция интеграции Grafana c контроллером Wirenboard доступна на официальном сайте Wirenboard:

https://wirenboard.com/wiki/Grafana